{% extends "base.html" %}
{% block title %}Generate Letter{% endblock %}

{% block content %}
<style>
.wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.panel {
    background: white;
    border-radius: 10px;
    padding: 20px;
}

.panel h3 {
    margin-bottom: 15px;
}

label {
    font-weight: 600;
    margin-top: 12px;
    display: block;
}

input, textarea, select {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border-radius: 6px;
    border: 1px solid #ddd;
}

textarea { height: 100px; }

.preview {
    font-family: "Times New Roman", serif;
    padding: 40px;
    line-height: 1.6;
    border: 1px solid #eee;
}

.preview h2 {
    text-align: center;
    text-decoration: underline;
    margin-bottom: 25px;
}

.actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

button {
    flex: 1;
    padding: 12px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
}

.primary { background: #2563eb; color: white; }
.secondary { background: #e5e7eb; }
</style>

<div class="wrapper">

<!-- LEFT: FORM -->
<div class="panel">
    <h3>Letter Details</h3>

    <label>Letter Type</label>
    <select id="letterType">
        <option>Relieving Letter</option>
        <option>Warning Letter</option>
        <option>Termination Letter</option>
        <option>Certificate of Appreciation</option>
    </select>

    <label>Employee Name</label>
    <input id="empName" value="{{ name }}">

    <label>Designation</label>
    <input id="designation" value="{{ designation }}">

    <label>Subject / Title</label>
    <input id="title" value="{{ title }}">

    <label>Letter Body</label>
    <textarea id="body">{{ body }}</textarea>

    <div class="actions">
        <button class="primary">Generate Letter</button>
        <button class="secondary">Save as Draft</button>
    </div>
</div>

<!-- RIGHT: PREVIEW -->
<div class="panel preview">
    <p><b>Date:</b> <span id="p_date"></span></p>

    <h2 id="p_title">{{ title }}</h2>

    <p>Dear <span id="p_name">{{ name }}</span>,</p>

    <p id="p_body">{{ body }}</p>

    <br>

    <p>
        Sincerely,<br><br>
        <b>HR Department</b><br>
        Company Name
    </p>
</div>

</div>

<script>
const bind = (input, preview) => {
    document.getElementById(input).addEventListener("input", e => {
        document.getElementById(preview).innerText = e.target.value;
    });
};

bind("empName","p_name");
bind("title","p_title");
bind("body","p_body");

document.getElementById("p_date").innerText =
    new Date().toLocaleDateString();
</script>
{% endblock %}
